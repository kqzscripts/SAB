-- KqzExploitz Script
-- UI Library: Kavo Library
-- Themes: Grey, Dark Grey, White
-- Features: Desync, Checkpoint, Instant Teleport (Bypass)

local Kavo = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Kavo.CreateLib("KqzExploitz", "Midnight") -- Midnight theme fits the grey/dark grey look

-- Values
local DesyncEnabled = false
local ServerPosPart = nil
local SavedCheckpoint = nil
local TeleportActive = false

-- Utility function for visuals
local function CreateServerPosVisual(pos)
    if ServerPosPart then ServerPosPart:Destroy() end
    
    local character = game.Players.LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then return end

    ServerPosPart = Instance.new("Part")
    ServerPosPart.Name = "ServerPositionVisual"
    ServerPosPart.Size = Vector3.new(2, 6, 2)
    ServerPosPart.Color = Color3.fromRGB(255, 255, 255)
    ServerPosPart.Material = Enum.Material.Neon
    ServerPosPart.Anchored = true
    ServerPosPart.CanCollide = false
    ServerPosPart.Position = pos or character.HumanoidRootPart.Position
    ServerPosPart.Parent = game.Workspace
    
    local BillboardGui = Instance.new("BillboardGui")
    BillboardGui.Size = UDim2.new(0, 200, 0, 50)
    BillboardGui.Adornee = ServerPosPart
    BillboardGui.AlwaysOnTop = true
    BillboardGui.ExtentsOffset = Vector3.new(0, 3, 0)
    BillboardGui.Parent = ServerPosPart
    
    local TextLabel = Instance.new("TextLabel")
    TextLabel.Size = UDim2.new(1, 0, 1, 0)
    TextLabel.BackgroundTransparency = 1
    TextLabel.Text = "Checkpoint / Server Pos"
    TextLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
    TextLabel.TextStrokeTransparency = 0
    TextLabel.TextSize = 20
    TextLabel.Font = Enum.Font.GothamBold
    TextLabel.Parent = BillboardGui
end

-- Tabs
local MainTab = Window:NewTab("Main")
local BypassTab = Window:NewTab("Bypasses")
local SettingsTab = Window:NewTab("Settings")

-- Main Section
local ExploitSection = MainTab:NewSection("Exploit Features")

ExploitSection:NewToggle("Desync (Confuse Server)", "Makes server think you are at the white block", function(state)
    DesyncEnabled = state
    if DesyncEnabled then
        CreateServerPosVisual()
        task.spawn(function()
            local hb = game:GetService("RunService").Heartbeat
            while DesyncEnabled do
                local char = game.Players.LocalPlayer.Character
                if char and char:FindFirstChild("HumanoidRootPart") then
                    local oldVelocity = char.HumanoidRootPart.Velocity
                    char.HumanoidRootPart.Velocity = Vector3.new(0, -500, 0)
                    hb:Wait()
                    char.HumanoidRootPart.Velocity = oldVelocity
                end
                task.wait()
            end
        end)
    else
        if ServerPosPart then ServerPosPart:Destroy() end
    end
end)

ExploitSection:NewButton("Update Visual Position", "Updates the white block to current position", function()
    if DesyncEnabled then
        CreateServerPosVisual()
    end
end)

-- Bypass Section
local TeleportSection = BypassTab:NewSection("Anti-Cheat Bypasses")

TeleportSection:NewButton("Save Checkpoint", "Saves position for teleporting", function()
    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        SavedCheckpoint = character.HumanoidRootPart.Position
        CreateServerPosVisual(SavedCheckpoint)
    end
end)

TeleportSection:NewToggle("Instant Teleport (Carpet Bypass)", "Auto-teleports on Brainrot pickup", function(state)
    TeleportActive = state
    if TeleportActive then
        task.spawn(function()
            while TeleportActive do
                local character = game.Players.LocalPlayer.Character
                if character and character:FindFirstChild("HumanoidRootPart") and SavedCheckpoint then
                    local hasBrainrot = false
                    for _, v in pairs(character:GetChildren()) do
                        if v.Name:lower():find("brainrot") then
                            hasBrainrot = true
                            break
                        end
                    end
                    
                    if hasBrainrot then
                        local backpack = game.Players.LocalPlayer.Backpack
                        local carpet = backpack:FindFirstChild("Flying Carpet") or character:FindFirstChild("Flying Carpet")
                        
                        if carpet then
                            if carpet.Parent == backpack then
                                carpet.Parent = character
                            end
                            task.wait(0.1)
                            local hrp = character.HumanoidRootPart
                            hrp.Velocity = Vector3.new(0, 1, 0)
                            hrp.CFrame = CFrame.new(SavedCheckpoint)
                            break
                        end
                    end
                end
                task.wait(0.5)
            end
        end)
    end
end)

-- Settings Section
local UISection = SettingsTab:NewSection("UI Settings")

UISection:NewKeybind("Toggle UI", "Key to hide/show UI", Enum.KeyCode.RightControl, function()
	Kavo:ToggleUI()
end)
